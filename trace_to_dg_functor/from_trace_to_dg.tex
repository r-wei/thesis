\section{From a trace functor to a dg functor} \label{sec:trace_to_dg}
We begin this section by defining two dg 
categories.

\begin{defn} \label{def:chi}
Let $\mathcal{C}$ be a category in dg cocategories. 
Let $\chi(\mathcal{C})$ be the dg category with
\begin{itemize}
	\item Objects = $\{A_0 \to \dots \to A_n \to A_0: A_i \in Obj(\mathcal{C}), n\geq 0\}$
	\item Morphisms = $\{$linear combinations of compositions of 
	\begin{align*}
	\textrm{rotations } \tau_n
	&: 
	\mathcal{A}
	\mapsto (A_n \to A_0 \to \dots \to A_n) \\
	\textrm{coboundaries } \delta_{j,n}
	&: 
	\mathcal{A}\mapsto 
	(A_0 \to \dots \to A_j \to A_{j+2\,(mod\,n+1)} 
	\to \dots \to A_0) \\
	\textrm{codegeneracies: } \sigma_{i,n}
	&: \mathcal{A}
	\mapsto 
	(A_0 \to \dots \to A_i \to A_i \to \dots \to A_0)
	\end{align*}
	where $\mathcal{A}:= (A_0 \to \dots \to A_n \to A_0)$,
	subject to the cyclic relations in Appendix \label{chap:lambda}$\}[0]$
\end{itemize}
\end{defn}
%
\begin{defn} \label{def:D}
Let $\mathcal{D}$ be the dg category with 
\begin{itemize}
	\item Objects = $\{(\underset{B}{\textrm{dg cocategory}}, 
	\underset{C}{\textrm{dg comodule}})\}$
	\item Morphisms:
	\begin{align*}
	\mathcal{D}^p \big((B_1, C_1), (B_0,C_0) \big)
	&:= 
	\begin{Bmatrix}
	F: B_1 \to B_0 \textrm{ dg functor,}\\
	F_!: C_1 \to F^*C_0 \textrm{ degree-p linear map}
	\end{Bmatrix}\\
	&\phantom{:=}
	d_{\mathcal{D}}(F, F_!) = 
	(F, [d,F_!] = 
	d_{F^*C_0}\circ F_! \pm F_! \circ d_{C_1})
	\end{align*}
	\item Composition: $(G, G_!) \underset{D}{\circ} (F, F_!) 
	= (GF, F^*G_! \circ F_!)$
\end{itemize}
\end{defn}
%
Composition in $\mathcal{D}$ will be well-defined 
and associative for any choice of a natural pullback 
that satisfies
\begin{equation}
F^*G^* \cong (GF)^*.
\end{equation}
For consistency, we will choose the same pullback of 
dg comodules for Definitions \ref{def:trace_dg_comodule} 
and \ref{def:D}. (See Section \ref{sec:} for an 
explicit description of 
the pullback we've chosen for dg comodules over the 
endomorphism dg cocategories given in Equation 
\ref{eq:cat_in_dgcocat}.)
%

Now, let $\mathcal{C}$ be a category in dg cocategories 
and $T$ be a trace functor on $\mathcal{C}$ 
(Definition \ref{def:trace_dg_comodule}). We will show 
that $T$ gives a dg functor $\mathcal{F}_T: 
\chi(\mathcal{C}) \to \mathcal{D}$. On objects,
$$
\underbrace{(A_0 \to \dots \to A_n \to A_0)}_{\in Obj(\chi(\mathcal{C}))}
\underset{\mathcal{F}_T}{\mapsto} 
\begin{pmatrix}
	\mathcal{C}(A_0,A_1) \otimes \dots \otimes \mathcal{C}(A_n,A_0)
	\textrm{ dg cocategory,}\\
	m^{*n} T(A_0) \textrm{ dg comodule where }\\
	m^n: \mathcal{C}(A_0,A_1) \otimes \dots \otimes \mathcal{C}(A_n,A_0) \to \mathcal{C}(A_0,A_0)
\end{pmatrix}
$$
On generating morphisms in $\chi(\mathcal{C})$, 
\begin{align} \label{eq:trace_induced_dg}
\begin{split}
\delta_{j,n}
&\underset{\mathcal{F}_T}{\mapsto} 
\begin{pmatrix}
	\textrm{$\hat{\delta}_{j,n}$ := composition functor over $(j+1)^{th}$ factor}\\
	\dots \otimes \mathcal{C}(A_j,A_{j+1})
	\otimes \mathcal{C}(A_{j+1},A_{j+2}) \otimes \dots
	\xrightarrow{\hat{\delta}_{j,n}=m}
	\dots \otimes \mathcal{C}(A_j,A_{j+2}) \otimes \dots,\\
	m^{*n}T(A_0)
	\xrightarrow{\delta_{j,n!} := id}
	\hat{\delta}_{j,n}^* m^{*n-1}T(A_0)
	\cong (m^{n-1}\hat{\delta}_{j,n})^* T(A_0)
	\cong m^{*n} T(A_0)
\end{pmatrix}\\
%
\sigma_{i,n}
&\underset{\mathcal{F}_T}{\mapsto} 
\begin{pmatrix}
	\textrm{$\hat{\sigma}_{i,n}$ := insert $id_{A_i}$ and $1\in k$ 
	into the $i^{th}$ slot}\\
	\dots \otimes \mathcal{C}(A_i,A_{i+1})
	\otimes \dots
	\xrightarrow{\hat{\sigma}_{i,n}}
	\dots \otimes \mathcal{C}(A_i,A_i) 
	\otimes \mathcal{C}(A_i,A_{i+1}) \otimes \dots,\\
	m^{*n}T(A_0)
	\xrightarrow{\sigma_{i,n!} := id}
	\hat{\sigma}_{i,n}^* m^{*n+1}T(A_0)
	\cong (m^{n+1}\hat{\sigma}_{i,n})^* T(A_0)
	\cong m^{*n} T(A_0)
\end{pmatrix}\\
%
\tau_n
&\underset{\mathcal{F}_T}{\mapsto} 
\begin{pmatrix}
	\textrm{$\hat{\tau}_n$ := rotate factors}\\
	\mathcal{C}(A_0,A_1) \otimes \dots 
	\otimes \mathcal{C}(A_n,A_0)
	\xrightarrow{\hat{\tau}_n}
	\mathcal{C}(A_n,A_0) \otimes \dots 
	\otimes \mathcal{C}(A_{n-1},A_n),\\
	m^{*n}T(A_0)
	\xrightarrow{\tau_{n!} := m^{*n-1} \tau_!(A_0,A_n)}
	\hat{\tau}_n^* m^{*n}T(A_n) \textrm{ where}\\
	m^{n-1}: 
	\big( \mathcal{C}(A_0,A_1) \otimes \dots \otimes 
	\mathcal{C}(A_{n-1},A_n) \big) \otimes \mathcal{C}(A_n,A_0)
	\to \mathcal{C}(A_0,A_n) \otimes \mathcal{C}(A_n,A_0)
\end{pmatrix}.
\end{split}
\end{align}
To show that this association on generating morphisms 
gives a functor, we should check that $\mathcal{F}_T$ 
preserves the cyclic relations in Equation 
\ref{eqn:cyclic_relations}. All of the relations involving 
$\delta$'s and $\sigma$'s are straightforward to 
check and follow from (1) the associativity of the composition 
functor $m$ in $\mathcal{C}$, and (2) the general fact that 
$f \circ id = id \circ f = f$ for a map $f$. The 
remaining relation, $\tau_n^{n+1} = id$, is preserved:
\begin{itemize}
	\item for $n=2$ because this is Equation 
	\ref{eq:trace_cocycle} from the definition of a 
	trace functor,
	\item for $n>2$ because these are pullbacks of 
	Equation \ref{eq:trace_cocycle},
	\item and for $n=1$ because this follows from 
	Equation \ref{eq:trace_cocycle} with $B=C$ and 
	the fact that $\sigma_{1,1!}$ is an identity 
	map on comodules.
\end{itemize}
$\mathcal{F}_T$ is dg because $\delta_{j,n!} := id$, 
$\sigma_{i,n!} := id$ and $\tau_{n!} := m^{*n-1} \tau_!$
commute with the differentials.

%
Now, we are ready to define a $``$trace functor up 
to homotopy''.
%
\begin{defn} \label{def:trace_up_to_homotopy}
Let $\mathcal{C}$ be a category in dg 
cocategories. A trace functor up to homotopy on 
$\mathcal{C}$ is an $A_\infty$-functor 
$$\mathcal{F}: \chi(\mathcal{C}) \to \mathcal{D}$$
where $\chi(\mathcal{C})$ and $\mathcal{D}$ are 
dg categories defined in Defintions \ref{def:chi} 
and \ref{def:D}, respectively, such that
\begin{itemize}
	\item $\mathcal{F}(A_0 \to A_0) \cong 
	\begin{pmatrix}
		\mathcal{C}(A_0,A_0),\\
		T(A_0) \textrm{ any dg comodule over }\mathcal{C}(A_0,A_0)\\
	\end{pmatrix}$
	\item for $n>0$,$\; \mathcal{F}
	(A_0 \to \dots \to A_n \to A_0) \cong	
	\begin{pmatrix}
		\mathcal{C}(A_0,A_1) \otimes \dots \otimes \mathcal{C}(A_n,A_0),\\
		m^{*n} T(A_0) \textrm{ where }\\
		m^n: \mathcal{C}(A_0,A_1) \otimes \dots \otimes \mathcal{C}(A_n,A_0) \to \mathcal{C}(A_0,A_0)
	\end{pmatrix}$
	\item for $\lambda = \delta_{j,n}, \sigma_{i,n}$,  
	$\; \mathcal{F}(\lambda) \cong 
	\mathcal{F}_T(\lambda)$ given in Equation \ref{eq:trace_induced_dg}
	\item $\mathcal{F}(\tau_1) \cong 
	\begin{pmatrix}
		\textrm{$\hat{\tau}_1$ := rotate factors}\\
		\mathcal{C}(A_0,A_1) \otimes \mathcal{C}(A_1,A_0)
		\xrightarrow{\hat{\tau}_1}
		\mathcal{C}(A_1,A_0) \otimes \mathcal{C}(A_0,A_1),\\
		T(A_0)
		\xrightarrow{\tau_{1!}}
		\hat{\tau}_1^* T(A_1) \textrm{ any map of dg comodules}
	\end{pmatrix}$
	\item for $n>1$, $\mathcal{F}(\tau_n) \cong 
	\mathcal{F}_T(\tau_n)$ given in Equation \ref{eq:trace_induced_dg}.
\end{itemize}
\end{defn}
There are many stipulations in the definition above 
because not every functor $\chi(\mathcal{C}) \to \mathcal{D}$
comes from a trace functor. However, an dg functor 
satsifying Definition \ref{def:trace_up_to_homotopy} 
does come from a trace functor.















